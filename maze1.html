<!DOCTYPE html>
<html onmousemove = 'move()'>
<body>
<canvas id = 'canvas' width='300' height='300' style="border:1px solid #000000;"></canvas>
</body>
<script>
var canvas = document.getElementById('canvas');
var maze = canvas.getContext('2d');
maze.lineWidth = 2;
maze.fillStyle = 'white'
maze.fillRect(0, 0, canvas.width, canvas.height);
/*for (i=0; i<(canvas.height/10)+(canvas.width/10); i++){
	if(i<canvas.width/10){
		maze.moveTo(i*10, 0)
		maze.lineTo(i*10, canvas.width)	
	}else{
		maze.moveTo(0, (i-30)*10)
		maze.lineTo(canvas.height, (i-30)*10)
	}
	maze.stroke()
}*/
pointlist = []
x=10;
y=10;
mazelist = [[x, y]];
maze.moveTo(x, y)
prevx = 0
prevy = 0
movelist = [[1, 0], [0, 1], [-1, 0], [0, -1]]
maze.strokeStyle = 'black';
maze.beginPath()
point = 0
for(i=0;i<((canvas.width)/10)*(canvas.height/10);i++){
	pointlist[pointlist.length] = false;
}
function generate(){
	prevx = x
	prevy = y
	/*if (point < 2){
		x = x+1
	}else if (point == 2){
		y = y+1
	}else{
		x= x-1
	}*/
	random = Math.random();
	prevx2 = prevx
	prevy2 = prevy
	x = x + movelist[parseInt(random*(movelist.length))][0]
	y = y + movelist[parseInt(random*(movelist.length))][1]
	if(x>canvas.width/10 || y>canvas.height/10||x<0||y<0||pointlist[(y*(canvas.width/10))+x] == true){
		/*point = point-1
		if (point < 0){
			point = mazelist.length-1
		}*/
		mazepoint = mazelist[parseInt(random*mazelist.length)]
		console.log(mazelist[10])
		x = mazepoint[0]
		y = mazepoint[1]
		prevx = x
		prevy = y
		maze.moveTo(x, y)
		generate();
	}
	mazelist[mazelist.length] = [x, y];
	pointlist[(y*(canvas.width/10))+x] = true;
	
}
function move(){
	point = mazelist.length-1
	generate();
	maze.beginPath()
	maze.strokeStyle = 'white'
	if ((x-prevx)==-1 || (y-prevy)==-1){
		maze.moveTo((x-(x-prevx))*10, ((y-(y-prevy))*10))
		maze.lineTo(((x-(x-prevx))+Math.abs(y-prevy))*10, ((y-(y-prevy))+Math.abs(x-prevx))*10)	
	}else{
		maze.moveTo(x*10, y*10)
		maze.lineTo((x+Math.abs(y-prevy))*10, (y+Math.abs(x-prevx))*10)
	}
	maze.stroke();
	maze.beginPath()
	maze.strokeStyle = 'black'
	maze.moveTo(x*10, y*10)
	maze.lineTo((x+Math.abs(x-prevx))*10, (y+Math.abs(y-prevy))*10)
	if ((x-prevx)==-1 || (y-prevy)==-1){
		maze.moveTo(((x-(x-prevx))+(x-prevx))*10, ((y-(y-prevy))+(y-prevy))*10)
		maze.lineTo(((x-(x-prevx))+(1*neg(x-prevx)))*10, ((y-(y-prevy))+(1*neg(y-prevy)))*10)
	}else{
		maze.moveTo((x+(x-prevx))*10, (y+(y-prevy))*10)
		maze.lineTo((x+(1*neg(x-prevx)))*10, (y+(1*neg(y-prevy)))*10)
	}
	
	maze.moveTo((x+Math.abs(y-prevy))*10, (y+Math.abs(x-prevx))*10)	
	maze.lineTo((x+(1))*10, (y+(1))*10)
	maze.stroke()
}
function neg(val){
	if (val>-1){
		return 1;
	}else{
		return -1;
	}
}

</script>
</html>
